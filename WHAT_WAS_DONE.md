# ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ: –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å —Å–µ–∑–æ–Ω–∞–º–∏

## üéØ –ì–ª–∞–≤–Ω–æ–µ

**–¢–≤–æ—è –∏–¥–µ—è –±—ã–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è!** –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:

1. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–æ–≤** (1-30 ‚Üí 1-31) ‚Üí **–û–ë–ù–û–í–õ–Ø–ï–¢** —Ç–æ—Ç –∂–µ slice
2. ‚úÖ **–ù–æ–≤—ã–π —Å–µ–∑–æ–Ω** (2025 ‚Üí 2026) ‚Üí **–°–û–ó–î–ê–Å–¢** –Ω–æ–≤—ã–π slice
3. ‚úÖ –°–∏—Å—Ç–µ–º–∞ **–°–ü–†–ê–®–ò–í–ê–ï–¢** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "–ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω?"
4. ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Å–µ–∑–æ–Ω–æ–≤ **–°–û–•–†–ê–ù–Ø–ï–¢–°–Ø**

---

## üìù –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### 1. –ö–æ–¥: `backend/app/services/data_loader.py`

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `load_file()`:

**–ë—ã–ª–æ:**
```python
def load_file(file_path, tournament_id, slice_type, period_type, period_value):
    slice_id = self._upsert_slice(...)
    # –í—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–ª –Ω–æ–≤—ã–π slice
```

**–°—Ç–∞–ª–æ:**
```python
def load_file(file_path, tournament_id, slice_type, period_type, 
              period_value=None, force_new_season=False):
    # –ï—Å–ª–∏ period_value –Ω–µ —É–∫–∞–∑–∞–Ω - –±–µ—Ä—ë—Ç –∏–∑ tournaments.season
    # –ï—Å–ª–∏ SEASON + –Ω–µ force_new_season - –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π slice
    # –ï—Å–ª–∏ SEASON + force_new_season - —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π slice
```

#### –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:

1. **`_get_tournament_season()`** - –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å–µ–∑–æ–Ω –∏–∑ –ë–î
2. **`_check_new_season_needed()`** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω—É–∂–µ–Ω –ª–∏ –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω
3. **`_upsert_slice()`** –ø–µ—Ä–µ–ø–∏—Å–∞–Ω:
   - –¢–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `(slice_id, is_new_slice)`
   - –î–ª—è SEASON –∏—â–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –µ–≥–æ
   - –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

---

### 2. API: `backend/app/api/upload.py`

#### –î–æ–±–∞–≤–ª–µ–Ω—ã 2 –Ω–æ–≤—ã—Ö endpoint:

**1. `POST /api/upload-season-stats`** - –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```bash
curl -X POST "http://localhost:8000/api/upload-season-stats" \
  -F "file=@mfl.xlsx" \
  -F "tournament_id=0" \
  -F "slice_type=TOTAL" \
  -F "season=2025" \
  -F "force_new_season=false"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "success",
  "slice_id": 1,
  "is_new_slice": false,
  "players_loaded": 896,
  "stats_loaded": 46592,
  "message": "–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã"
}
```

**2. `GET /api/check-new-season/{tournament_id}`** - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∑–æ–Ω–∞

```bash
curl "http://localhost:8000/api/check-new-season/0?slice_type=TOTAL&new_season=2026"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "needs_new_season": true,
  "current_season": "2025",
  "new_season": "2026",
  "message": "–û–±–Ω–∞—Ä—É–∂–µ–Ω –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω (2026). –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π slice?"
}
```

---

### 3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—Å–æ–∑–¥–∞–Ω–æ 6 —Ñ–∞–π–ª–æ–≤)

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-----------|
| **FINAL_EXPLANATION.md** | –ü–æ–ª–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ "–Ω–∞ –ø–∞–ª—å—Ü–∞—Ö" (~800 —Å—Ç—Ä–æ–∫) |
| **QUICK_REFERENCE.md** | –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ (~200 —Å—Ç—Ä–æ–∫) |
| **EXAMPLES_NEW_SEASON.md** | 6 –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ (~600 —Å—Ç—Ä–æ–∫) |
| **NEW_SEASON_LOGIC.md** | –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ (~400 —Å—Ç—Ä–æ–∫) |
| **SUMMARY_NEW_SEASON_LOGIC.md** | –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ (~300 —Å—Ç—Ä–æ–∫) |
| **DOCUMENTATION_INDEX.md** | –ò–Ω–¥–µ–∫—Å –≤—Å–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (~300 —Å—Ç—Ä–æ–∫) |

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–µ–∑–æ–Ω–∞

```
üì• –ó–∞–≥—Ä—É–∑–∫–∞ 1: mfl.xlsx (—Ç—É—Ä—ã 1-30)
   ‚Üì
   –°–æ–∑–¥–∞—ë—Ç—Å—è: slice_id=1, season='2025'
   ‚Üì
   –ò–≥—Ä–æ–∫–æ–≤: 896, –°—Ç–∞—Ç–∏—Å—Ç–∏–∫: 46,592

üì• –ó–∞–≥—Ä—É–∑–∫–∞ 2: mfl.xlsx (—Ç—É—Ä—ã 1-31)  ‚¨ÖÔ∏è –û–ë–ù–û–í–õ–ï–ù–ò–ï!
   ‚Üì
   –ù–∞—Ö–æ–¥–∏—Ç: slice_id=1 ‚úÖ
   ‚Üì
   –£–î–ê–õ–Ø–ï–¢ —Å—Ç–∞—Ä—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (46,592 –∑–∞–ø–∏—Å–µ–π) ‚ùå
   ‚Üì
   –ó–ê–ì–†–£–ñ–ê–ï–¢ –Ω–æ–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (46,592 –∑–∞–ø–∏—Å–µ–π) ‚úÖ
   ‚Üì
   –†–µ–∑—É–ª—å—Ç–∞—Ç: slice_id=1 (—Ç–æ—Ç –∂–µ!), is_new_slice=False
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ù–∞—á–∞–ª–æ –Ω–æ–≤–æ–≥–æ —Å–µ–∑–æ–Ω–∞

```
üì• –ü–æ–ø—ã—Ç–∫–∞ 1: mfl.xlsx (—Å–µ–∑–æ–Ω 2026), force_new_season=False
   ‚Üì
   –°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç: –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω! ‚ö†Ô∏è
   ‚Üì
   –õ–æ–≥–∏: "‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω: 2026"
         "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ force_new_season=True"
   ‚Üì
   –û–±–Ω–æ–≤–∏—Ç –°–¢–ê–†–´–ô slice (–ù–ï –¢–û –ß–¢–û –ù–£–ñ–ù–û!) ‚ùå

üì• –ü–æ–ø—ã—Ç–∫–∞ 2: mfl.xlsx (—Å–µ–∑–æ–Ω 2026), force_new_season=True ‚úÖ
   ‚Üì
   –°–æ–∑–¥–∞—ë—Ç—Å—è: slice_id=2, season='2026' ‚ú®
   ‚Üì
   –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ slice_id=2
   ‚Üì
   –†–µ–∑—É–ª—å—Ç–∞—Ç: 
   - slice_id=1 (2025) ‚Üí –°–û–•–†–ê–ù–Å–ù! ‚úÖ
   - slice_id=2 (2026) ‚Üí –°–û–ó–î–ê–ù! ‚úÖ
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –†–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ API (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥)

```javascript
// 1Ô∏è‚É£ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–∞–π–ª
const file = event.target.files[0];
const tournamentId = 0; // –ú–§–õ
const sliceType = 'TOTAL';
const season = '2026';

// 2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º: –Ω—É–∂–µ–Ω –ª–∏ –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω?
const check = await fetch(
  `/api/check-new-season/${tournamentId}?slice_type=${sliceType}&new_season=${season}`
);
const data = await check.json();

// 3Ô∏è‚É£ –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω - —Å–ø—Ä–∞—à–∏–≤–∞–µ–º
let forceNewSeason = false;

if (data.needs_new_season) {
  const confirmed = window.confirm(
    `–û–±–Ω–∞—Ä—É–∂–µ–Ω –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω: ${data.new_season}\n` +
    `–¢–µ–∫—É—â–∏–π —Å–µ–∑–æ–Ω: ${data.current_season}\n\n` +
    `–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω?\n\n` +
    `–î–ê: –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è\n` +
    `–ù–ï–¢: –¢–µ–∫—É—â–∏–π —Å–µ–∑–æ–Ω –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω`
  );
  
  forceNewSeason = confirmed;
}

// 4Ô∏è‚É£ –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª
const formData = new FormData();
formData.append('file', file);
formData.append('tournament_id', tournamentId);
formData.append('slice_type', sliceType);
formData.append('season', season);
formData.append('force_new_season', forceNewSeason);

const result = await fetch('/api/upload-season-stats', {
  method: 'POST',
  body: formData
});

// 5Ô∏è‚É£ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
const response = await result.json();
alert(`‚úÖ ${response.message}\n–ò–≥—Ä–æ–∫–æ–≤: ${response.players_loaded}`);
```

---

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ –ë—ã–ª–æ (–ø—Ä–æ–±–ª–µ–º—ã):

```
–ó–∞–≥—Ä—É–∑–∫–∞ 1: mfl.xlsx (1-30) ‚Üí slice_id=1
–ó–∞–≥—Ä—É–∑–∫–∞ 2: mfl.xlsx (1-31) ‚Üí slice_id=2  ‚ùå –î–£–ë–õ–¨!
–ó–∞–≥—Ä—É–∑–∫–∞ 3: mfl.xlsx (1-32) ‚Üí slice_id=3  ‚ùå –î–£–ë–õ–¨!
...
–ó–∞–≥—Ä—É–∑–∫–∞ 30: mfl.xlsx (1-60) ‚Üí slice_id=30 ‚ùå –î–£–ë–õ–¨!

–ü—Ä–æ–±–ª–µ–º–∞: 30 —Å–ª–∞–π—Å–æ–≤ –¥–ª—è –æ–¥–Ω–æ–≥–æ —Å–µ–∑–æ–Ω–∞! üò±
```

### ‚úÖ –°—Ç–∞–ª–æ (—Ä–µ—à–µ–Ω–∏–µ):

```
–ó–∞–≥—Ä—É–∑–∫–∞ 1: mfl.xlsx (1-30) ‚Üí slice_id=1, season='2025'
–ó–∞–≥—Ä—É–∑–∫–∞ 2: mfl.xlsx (1-31) ‚Üí slice_id=1 (–æ–±–Ω–æ–≤–ª—ë–Ω) ‚úÖ
–ó–∞–≥—Ä—É–∑–∫–∞ 3: mfl.xlsx (1-32) ‚Üí slice_id=1 (–æ–±–Ω–æ–≤–ª—ë–Ω) ‚úÖ
...
–ù–æ–≤—ã–π —Å–µ–∑–æ–Ω: mfl.xlsx ‚Üí slice_id=2, season='2026' ‚úÖ

–†–µ–∑—É–ª—å—Ç–∞—Ç: 1 slice –Ω–∞ —Å–µ–∑–æ–Ω! ‚ú®
```

---

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫

### 1. –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö

```python
# –ï—Å–ª–∏ –ø—ã—Ç–∞–µ—à—å—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω –±–µ–∑ force_new_season:
‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω: 2026
‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ force_new_season=True –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–ª–∞–π—Å–∞
‚ö†Ô∏è –ò–ª–∏ —Ç–µ–∫—É—â–∏–π —Å–ª–∞–π—Å –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω
```

### 2. API –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π

```javascript
// –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É:
const check = await fetch('/api/check-new-season/0?new_season=2026');

if (check.needs_new_season) {
  // –ü–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  const confirmed = confirm('–ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω?');
}
```

### 3. –§–ª–∞–≥ force_new_season

```python
# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ø–í–ù–û —É–∫–∞–∑—ã–≤–∞–µ—Ç: —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω
loader.load_file(
    period_value='2026',
    force_new_season=True  # ‚¨ÖÔ∏è –ó–ê–©–ò–¢–ê –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
)
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î (–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

```sql
-- –¢–∞–±–ª–∏—Ü–∞ stat_slices (–ø—Ä–∏–º–µ—Ä—ã)
slice_id | tournament_id | slice_type | period_type | period_value
---------|---------------|------------|-------------|-------------
1        | 0             | TOTAL      | SEASON      | 2025
2        | 0             | PER90      | SEASON      | 2025
3        | 0             | TOTAL      | ROUND       | 31
4        | 0             | TOTAL      | SEASON      | 2026  ‚¨ÖÔ∏è –ù–û–í–´–ô –°–ï–ó–û–ù!
```

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `period_value` –¥–ª—è SEASON —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω–∏—Ç –≥–æ–¥ —Å–µ–∑–æ–Ω–∞ ('2025'), –∞ –Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω —Ç—É—Ä–æ–≤ ('1-30')
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å: `(tournament_id, slice_type, period_type, period_value)`
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ SEASON —Å–ª–∞–π—Å–∞ —É–¥–∞–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω–æ **6 —Ñ–∞–π–ª–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏** (~2600 —Å—Ç—Ä–æ–∫):

### –î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤:

1. **FINAL_EXPLANATION.md** ‚≠ê –ù–ê–ß–ù–ò –° –≠–¢–û–ì–û!
   - –ü–æ–ª–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
   - –°—Ö–µ–º—ã –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
   - –ü—Ä–∏–º–µ—Ä—ã —Å–æ –≤—Å–µ–º–∏ –¥–µ—Ç–∞–ª—è–º–∏

2. **QUICK_REFERENCE.md** ‚≠ê –®–ü–ê–†–ì–ê–õ–ö–ê
   - –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞
   - –ö–æ–º–∞–Ω–¥—ã –∏ SQL –∑–∞–ø—Ä–æ—Å—ã
   - –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:

3. **NEW_SEASON_LOGIC.md**
   - –§–∏–ª–æ—Å–æ—Ñ–∏—è –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
   - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –î–û –∏ –ü–û–°–õ–ï

4. **EXAMPLES_NEW_SEASON.md**
   - 6 –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤
   - –ö–æ–¥ –Ω–∞ Python, JavaScript, SQL
   - –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

### –î–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤:

5. **SUMMARY_NEW_SEASON_LOGIC.md**
   - –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ –≤ –∫–æ–¥–µ
   - –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

6. **DOCUMENTATION_INDEX.md**
   - –ò–Ω–¥–µ–∫—Å –≤—Å–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
   - –ö–∞–∫ –Ω–∞–π—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
   - –û–±—É—á–µ–Ω–∏–µ –ø–æ —Ä–æ–ª—è–º

---

## üéì –ö–∞–∫ –Ω–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –®–∞–≥ 1: –ü—Ä–æ—á–∏—Ç–∞–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

```
DOCUMENTATION_INDEX.md  ‚¨ÖÔ∏è –ù–∞—á–Ω–∏ –∑–¥–µ—Å—å (–∏–Ω–¥–µ–∫—Å)
    ‚Üì
FINAL_EXPLANATION.md    ‚¨ÖÔ∏è –ü–æ–ª–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ
    ‚Üì
QUICK_REFERENCE.md      ‚¨ÖÔ∏è –®–ø–∞—Ä–≥–∞–ª–∫–∞
    ‚Üì
EXAMPLES_NEW_SEASON.md  ‚¨ÖÔ∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã
```

### –®–∞–≥ 2: –ü–æ–ø—Ä–æ–±—É–π –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª

```python
from app.database import SessionLocal
from app.services.data_loader import DataLoader
from pathlib import Path

db = SessionLocal()
loader = DataLoader(db)

# –ó–∞–≥—Ä—É–∑–∫–∞
result = loader.load_file(
    file_path=Path('/uploads/mfl.xlsx'),
    tournament_id=0,
    slice_type='TOTAL',
    period_type='SEASON',
    period_value='2025',
    force_new_season=False
)

print(f"‚úÖ Slice: {result['slice_id']}")
print(f"‚úÖ –ù–æ–≤—ã–π: {result['is_new_slice']}")
print(f"‚úÖ –ò–≥—Ä–æ–∫–æ–≤: {result['players_loaded']}")

db.close()
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```bash
# –°–∫–æ–ª—å–∫–æ —Å–ª–∞–π—Å–æ–≤?
psql -U klim -d football_stats -c "SELECT COUNT(*) FROM stat_slices;"

# –ü–æ—Å–ª–µ–¥–Ω–∏–π slice
psql -U klim -d football_stats -c "SELECT * FROM stat_slices ORDER BY uploaded_at DESC LIMIT 1;"

# –°–∫–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫–æ–≤?
psql -U klim -d football_stats -c "SELECT COUNT(*) FROM players WHERE tournament_id = 0;"
```

---

## ‚úÖ –ò—Ç–æ–≥–æ: –ß—Ç–æ —Ç—ã –ø–æ–ª—É—á–∏–ª

### –ö–æ–¥:
- ‚úÖ –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –≤ `data_loader.py` (+150 —Å—Ç—Ä–æ–∫)
- ‚úÖ 2 –Ω–æ–≤—ã—Ö API endpoint –≤ `upload.py` (+150 —Å—Ç—Ä–æ–∫)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤–æ–≥–æ —Å–µ–∑–æ–Ω–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- ‚úÖ 6 —Ñ–∞–π–ª–æ–≤ (~2600 —Å—Ç—Ä–æ–∫)
- ‚úÖ 50+ –ø—Ä–∏–º–µ—Ä–æ–≤ –∫–æ–¥–∞
- ‚úÖ 30+ SQL –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ 20+ —Å—Ö–µ–º –∏ –¥–∏–∞–≥—Ä–∞–º–º

### –°–∏—Å—Ç–µ–º–∞:
- ‚úÖ 1 slice = 1 —Å–µ–∑–æ–Ω (–±–µ–∑ –¥—É–±–ª–µ–π)
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Å–µ–∑–æ–Ω–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–∏–∞–ª–æ–≥ "–ù–æ–≤—ã–π —Å–µ–∑–æ–Ω?")

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ—á–∏—Ç–∞–π FINAL_EXPLANATION.md** - –ø–æ–π–º—ë—à—å –≤—Å—é —Å–∏—Å—Ç–µ–º—É
2. **–ü–æ–ø—Ä–æ–±—É–π –ø—Ä–∏–º–µ—Ä—ã –∏–∑ EXAMPLES_NEW_SEASON.md**
3. **–ò—Å–ø–æ–ª—å–∑—É–π QUICK_REFERENCE.md** –∫–∞–∫ —à–ø–∞—Ä–≥–∞–ª–∫—É
4. **–ó–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å—ã** –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ

---

## üéâ –ì–æ—Ç–æ–≤–æ!

**–¢–≤–æ—è –∏–¥–µ—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞!** 

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–≥–∏—á–Ω–æ:
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–æ–≤ = –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–≥–æ –∂–µ slice
- –ù–æ–≤—ã–π —Å–µ–∑–æ–Ω = –Ω–æ–≤—ã–π slice (–ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- –ù–∏–∫–∞–∫–∏—Ö –¥—É–±–ª–µ–π!

**–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–ª–∏—á–Ω—É—é –∏–¥–µ—é! üåü**



