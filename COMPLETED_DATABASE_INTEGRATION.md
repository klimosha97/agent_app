# ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å Frontend

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **2 —Å–ª–∞–π—Å–∞ –∑–∞–≥—Ä—É–∂–µ–Ω—ã**:
  - `TOTAL / SEASON / 1-15` ‚Äî —Å—É–º–º–∞—Ä–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Ç—É—Ä—ã 1-15 (mfl.xlsx)
  - `PER90 / SEASON / 1-15` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ 90 –º–∏–Ω—É—Ç (mfl_average_90min.xlsx)
- ‚úÖ **892 –∏–≥—Ä–æ–∫–∞ –ú–§–õ** –≤ –ë–î
- ‚úÖ **76,408 –∑–∞–ø–∏—Å–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏** (2 —Å–ª–∞–π—Å–∞ √ó 892 –∏–≥—Ä–æ–∫–∞ √ó ~43 –º–µ—Ç—Ä–∏–∫–∏)

### 2. Backend API
- ‚úÖ **–ù–æ–≤—ã–π endpoint**: `/api/players/database`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
  - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ `TOTAL` ‚Üî `PER90` —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `slice_type`
  - –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–≥—Ä–æ–∫–∞ –∏–ª–∏ –∫–æ–º–∞–Ω–¥–µ
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ —Ç—É—Ä–Ω–∏—Ä—É –∏ –ø–æ–∑–∏—Ü–∏–∏
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø–æ –ª—é–±–æ–º—É –ø–æ–ª—é
  - –ü–∞–≥–∏–Ω–∞—Ü–∏—é
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç **20 –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫**:
  - –ì–æ–ª—ã, –∞—Å—Å–∏—Å—Ç—ã, xG
  - –£–¥–∞—Ä—ã, —É–¥–∞—Ä—ã –≤ —Å—Ç–≤–æ—Ä
  - –ü–µ—Ä–µ–¥–∞—á–∏, —Ç–æ—á–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á, –∫–ª—é—á–µ–≤—ã–µ –ø–µ—Ä–µ–¥–∞—á–∏
  - –ï–¥–∏–Ω–æ–±–æ—Ä—Å—Ç–≤–∞, —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –µ–¥–∏–Ω–æ–±–æ—Ä—Å—Ç–≤
  - –û–±–≤–æ–¥–∫–∏, —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ–±–≤–æ–¥–æ–∫
  - –û—Ç–±–æ—Ä—ã, –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã, –ø–æ–¥–±–æ—Ä—ã
  - –ñ—ë–ª—Ç—ã–µ –∏ –∫—Ä–∞—Å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏

### 3. Frontend (–≤–∫–ª–∞–¥–∫–∞ "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö")
- ‚úÖ **–¢—É–º–±–ª–µ—Ä TOTAL / PER90** ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ **–ü–æ–∏—Å–∫** –ø–æ –∏–º–µ–Ω–∏ –∏–≥—Ä–æ–∫–∞ –∏–ª–∏ –∫–æ–º–∞–Ω–¥–µ
- ‚úÖ **–¢–∞–±–ª–∏—Ü–∞ —Å 20 –∫–æ–ª–æ–Ω–∫–∞–º–∏** —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** (50 –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
- ‚úÖ **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
  - –ü—Ä–æ—Ü–µ–Ω—Ç—ã —Å —Å–∏–º–≤–æ–ª–æ–º `%`
  - –ß–∏—Å–ª–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é
  - NULL –∑–Ω–∞—á–µ–Ω–∏—è –∫–∞–∫ `‚Äî`

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö

### TOTAL (–≤—Å–µ–≥–æ –∑–∞ —Å–µ–∑–æ–Ω):

| –ò–≥—Ä–æ–∫ | –ö–æ–º–∞–Ω–¥–∞ | –ü–æ–∑ | –ì–æ–ª—ã | xG | –£–¥–∞—Ä—ã | –ü–µ—Ä–µ–¥–∞—á–∏ | –¢–æ—á–Ω. % |
|-------|---------|-----|------|-----|-------|----------|---------|
| –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–æ–º–∞–ª—é–∫ | –ß–µ—Ä—Ç–∞–Ω–æ–≤–æ –ú–æ–ª. | –§ –¶ | 21 | 14.27 | 85 | 275 | 63.3% |
| –ú–∞–≥–æ–º–µ–¥ –û–º–∞—Ä–æ–≤ | –†–æ–¥–∏–Ω–∞-–ú | –ê–ü –õ | 17 | 11.50 | 114 | 611 | 68.6% |
| –ö–∞–∑–±–µ–∫ –ú—É–∫–∞–∏–ª–æ–≤ | –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä –ú–æ–ª. | –§ –¶ | 16 | 16.21 | 69 | 215 | 57.7% |

### PER90 (–∑–∞ 90 –º–∏–Ω—É—Ç):

| –ò–≥—Ä–æ–∫ | –ö–æ–º–∞–Ω–¥–∞ | –ü–æ–∑ | –ì–æ–ª—ã | xG | –£–¥–∞—Ä—ã | –ü–µ—Ä–µ–¥–∞—á–∏ | –¢–æ—á–Ω. % |
|-------|---------|-----|------|-----|-------|----------|---------|
| –î–º–∏—Ç—Ä–∏–π –®–µ—è–Ω–æ–≤ | –ê–∫—Ä–æ–Ω –ú–æ–ª. | –ü –ü–¶ | 6.43 | 5.59 | 6.43 | 25.71 | 75.0% |
| ... | ... | ... | ... | ... | ... | ... | ... |

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. –û—Ç–∫—Ä—ã—Ç—å –≤–∫–ª–∞–¥–∫—É **"–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö"**
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç—É–º–±–ª–µ—Ä **"–í—Å–µ–≥–æ"** ‚Üî **"–ó–∞ 90 –º–∏–Ω—É—Ç"**
3. –í–≤–µ—Å—Ç–∏ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
4. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å–æ –≤—Å–µ–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏

### API –∑–∞–ø—Ä–æ—Å

```bash
# TOTAL —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl "http://localhost:8000/api/players/database?slice_type=TOTAL&page=1&limit=50"

# PER90 —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl "http://localhost:8000/api/players/database?slice_type=PER90&page=1&limit=50"

# –° –ø–æ–∏—Å–∫–æ–º
curl "http://localhost:8000/api/players/database?slice_type=TOTAL&search=–ü–æ–º–∞–ª—é–∫"

# –° —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ –ø–æ–∑–∏—Ü–∏–∏
curl "http://localhost:8000/api/players/database?slice_type=TOTAL&position_group=ATT"
```

### React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```typescript
import { apiService } from '../services/api';

// –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–≥—Ä–æ–∫–æ–≤
const { data } = useQuery(
  ['database-players', sliceType, search, page],
  () => apiService.getAllPlayersFromDatabase(
    page,
    limit,
    sliceType,  // 'TOTAL' –∏–ª–∏ 'PER90'
    search
  )
);

const players = data?.data || [];
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ API

```json
{
  "success": true,
  "data": [
    {
      "player_id": 44,
      "full_name": "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–æ–º–∞–ª—é–∫",
      "team_name": "–ß–µ—Ä—Ç–∞–Ω–æ–≤–æ –ú–æ–ª.",
      "birth_year": 2007,
      "position_code": "–§ –¶",
      "position_group": "ATT",
      "position_name": "–§–æ—Ä–≤–∞—Ä–¥ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π",
      "minutes": 1336.0,
      "goals": 21.0,
      "assists": 5.0,
      "xg": 14.27,
      "shots": 85.0,
      "shots_on_target": 49.0,
      "passes": 275.0,
      "passes_accurate_pct": 63.27,
      "key_passes": 21.0,
      "duels": 307.0,
      "duels_success_pct": 30.94,
      "dribbles": 66.0,
      "dribbles_success_pct": 45.45,
      "tackles": 22.0,
      "interceptions": 16.0,
      "recoveries": 46.0,
      "yellow_cards": 4.0,
      "red_cards": null
    }
  ],
  "total": 892,
  "page": 1,
  "per_page": 50,
  "pages": 18,
  "slice_type": "TOTAL",
  "message": "–ù–∞–π–¥–µ–Ω–æ 892 –∏–≥—Ä–æ–∫–æ–≤ (TOTAL)"
}
```

### SQL –∑–∞–ø—Ä–æ—Å (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π)

```sql
SELECT 
    p.player_id,
    p.full_name,
    p.team_name,
    pos.code as position_code,
    MAX(CASE WHEN ps.metric_code = 'goals' THEN ps.metric_value END) as goals,
    MAX(CASE WHEN ps.metric_code = 'xg' THEN ps.metric_value END) as xg,
    MAX(CASE WHEN ps.metric_code = 'shots' THEN ps.metric_value END) as shots,
    -- ... –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏ ...
FROM players p
JOIN positions pos ON p.position_id = pos.position_id
JOIN stat_slices ss ON ss.tournament_id = p.tournament_id
JOIN player_statistics ps ON ps.player_id = p.player_id AND ps.slice_id = ss.slice_id
WHERE ss.slice_type = :slice_type  -- 'TOTAL' –∏–ª–∏ 'PER90'
  AND ss.period_type = 'SEASON'
GROUP BY p.player_id, p.full_name, p.team_name, pos.code
ORDER BY goals DESC;
```

---

## üìã –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –°–ª–∞–π—Å | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–∞–ø–∏—Å–µ–π |
|------|-------|----------|---------|
| `mfl.xlsx` | TOTAL/SEASON/1-15 | –°—É–º–º–∞—Ä–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ 1-15 —Ç—É—Ä–æ–≤ | ~38,200 |
| `mfl_average_90min.xlsx` | PER90/SEASON/1-15 | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ 90 –º–∏–Ω—É—Ç –∑–∞ 1-15 —Ç—É—Ä–æ–≤ | ~38,200 |

**–í—Å–µ–≥–æ –≤ –ë–î:** 76,408 –∑–∞–ø–∏—Å–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å frontend!**

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É TOTAL –∏ PER90
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `backend/app/api/players.py` ‚Äî API endpoint
- `backend/app/services/data_loader.py` ‚Äî –ó–∞–≥—Ä—É–∑—á–∏–∫ –¥–∞–Ω–Ω—ã—Ö
- `frontend/src/pages/Database.tsx` ‚Äî –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö"
- `frontend/src/services/api.ts` ‚Äî API –∫–ª–∏–µ–Ω—Ç
- `db/schema.sql` ‚Äî –°—Ö–µ–º–∞ –ë–î
- `db/README_ARCHITECTURE.md` ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ë–î
- `db/USAGE_GUIDE.md` ‚Äî –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üîÆ –ß—Ç–æ –¥–∞–ª—å—à–µ?

1. ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** ‚Äî –≥–æ—Ç–æ–≤–∞
2. ‚úÖ **–í–∫–ª–∞–¥–∫–∞ "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö"** ‚Äî –≥–æ—Ç–æ–≤–∞
3. üîÑ **–¢—É—Ä–Ω–∏—Ä—ã** ‚Äî –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –Ω–æ–≤–æ–π –ë–î
4. üîÑ **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å UI
5. üîÑ **–ê–Ω–∞–ª–∏–∑ –∏–≥—Ä–æ–∫–æ–≤** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—è–≤–ª–µ–Ω–∏–µ —Ç–∞–ª–∞–Ω—Ç–æ–≤



